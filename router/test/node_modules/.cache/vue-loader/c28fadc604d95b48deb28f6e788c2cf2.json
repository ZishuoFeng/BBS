{"remainingRequest":"/Users/fengzishuo/Desktop/开发文件夹/py开发/bbs_rectify_软测课设/router/test/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fengzishuo/Desktop/开发文件夹/py开发/bbs_rectify_软测课设/router/test/src/views/search.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fengzishuo/Desktop/开发文件夹/py开发/bbs_rectify_软测课设/router/test/src/views/search.vue","mtime":1625730158000},{"path":"/Users/fengzishuo/Desktop/开发文件夹/py开发/bbs_rectify_软测课设/router/test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fengzishuo/Desktop/开发文件夹/py开发/bbs_rectify_软测课设/router/test/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/fengzishuo/Desktop/开发文件夹/py开发/bbs_rectify_软测课设/router/test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fengzishuo/Desktop/开发文件夹/py开发/bbs_rectify_软测课设/router/test/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge3JlcXVlc3R9IGZyb20gJy4uL25ldHdvcmsvcmVxdWVzdCcNCmV4cG9ydCBkZWZhdWx0IHsNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgaW5wdXQ6ICIiLA0KICAgICAgc2VsZWN0OiAiIiwNCiAgICAgIHF1ZXJ5SW5mbzogew0KICAgICAgICBxdWVyeTogIiIsDQogICAgICAgIHBhZ2VudW06IDEsDQogICAgICB9LA0KICAgICAgaWQ6ICIiLA0KDQogICAgICBjdXJyZW50X21lc3NhZ2VzOiBbXSwNCiAgICAgIGFsbF9tZXNzYWdlczogW10sDQogICAgICB0b3RhbDogMCwNCiAgICB9Ow0KICB9LA0KICBjb21wdXRlZDogew0KICAgIGltZzogZnVuY3Rpb24gKCkgew0KICAgICAgcmV0dXJuIGZ1bmN0aW9uICh1cmwpIHsNCiAgICAgICAgcmV0dXJuIHJlcXVpcmUoIi4uL2Fzc2V0cy8iICsgdXJsKTsNCiAgICAgIH07DQogICAgfSwNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGhhbmRsZVNpemVDaGFuZ2UodmFsKSB7DQogICAgICBjb25zb2xlLmxvZyhg5q+P6aG1ICR7dmFsfSDmnaFgKTsNCiAgICB9LA0KICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UobmV3UGFnZSkgew0KICAgICAgdGhpcy5xdWVyeUluZm8ucGFnZW51bSA9IG5ld1BhZ2U7DQogICAgICAvLyBjb25zb2xlLmxvZyhg5b2T5YmN6aG1OiAke3RoaXMucXVlcnlJbmZvLnBhZ2VudW19YCk7DQogICAgICB2YXIgYSA9IHRoaXMucXVlcnlJbmZvLnBhZ2VudW07DQogICAgICAvLyBjb25zb2xlLmxvZyhhKTsNCiAgICAgIHRoaXMuY3VycmVudF9tZXNzYWdlcyA9IHRoaXMuYWxsX21lc3NhZ2VzLnNsaWNlKDMgKiBhIC0gMywgMyAqIGEpOw0KICAgICAgLy8gY29uc29sZS5sb2coYOW9k+WJjWN1cnJldF9tZXNzYWdlc+mVv+W6pjogJHt0aGlzLmN1cnJlbnRfbWVzc2FnZXN9YCk7DQogICAgfSwNCiAgICBqdW1wKG1lc3NhZ2VJZCwgdHlwZSkgew0KICAgICAgbG9jYWxTdG9yYWdlLm1lc3NhZ2VJZCA9IG1lc3NhZ2VJZDsNCiAgICAgIGxvY2FsU3RvcmFnZS50eXBlID0gdHlwZTsNCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsNCiAgICAgICAgcGF0aDogIm1lc3NhZ2VEZXRhaWwiLA0KICAgICAgfSk7DQogICAgfSwNCg0KICAgIHNlYXJjaERhdGEoKSB7DQogICAgICBjb25zb2xlLmxvZyh0aGlzLmlucHV0KTsNCiAgICAgIGNvbnNvbGUubG9nKHRoaXMuc2VsZWN0KTsNCg0KICAgICAgcmVxdWVzdCh7DQogICAgICAgIG1ldGhvZDogIlBPU1QiLA0KICAgICAgICB1cmw6ICJodHRwOi8vMTI3LjAuMC4xOjUwMDAvc2VhcmNoIiwNCiAgICAgICAgZGF0YTogew0KICAgICAgICAgIHNlbGVjdDogdGhpcy5zZWxlY3QsDQogICAgICAgICAgaW5wdXQ6IHRoaXMuaW5wdXQsDQogICAgICAgIH0sDQogICAgICB9KQ0KICAgICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpOw0KICAgICAgICAgIGlmKHRoaXMuc2VsZWN0PT0iIil7DQogICAgICAgICAgICBhbGVydCgi6K+36YCJ5oup5pCc57Si5YiG57G7Iik7DQogICAgICAgICAgICByZXR1cm4NCiAgICAgICAgICB9DQogICAgICAgICAgaWYocmVzLmRhdGE9PSJpbnZhbGlkIil7DQogICAgICAgICAgICBhbGVydCgi6K+36L6T5YWl5pCc57Si5YaF5a65IikNCiAgICAgICAgICAgIHJldHVybg0KICAgICAgICAgIH0NCiAgICAgICAgICBpZihyZXMuZGF0YSE9ImludmFsaWQiKXsNCiAgICAgICAgICBmb3IgKHZhciBpIGluIHJlcy5kYXRhKSB7DQogICAgICAgICAgICB0aGlzLmFsbF9tZXNzYWdlc1tpXSA9IHJlcy5kYXRhW2ldOw0KICAgICAgICAgIH0NCiAgICAgICAgICB0aGlzLnRvdGFsID0gdGhpcy5hbGxfbWVzc2FnZXMubGVuZ3RoOw0KICAgICAgICAgIHRoaXMuY3VycmVudF9tZXNzYWdlcyA9IHRoaXMuYWxsX21lc3NhZ2VzLnNsaWNlKDAsIDMpO30NCiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YSkNCiAgICAgICAgICAvLyBmb3IodmFyIGkgaW4gcmVzLmRhdGEpew0KICAgICAgICAgIC8vICAgdGhhdC5hbGxfbWVzc2FnZXNbaV09cmVzLmRhdGFbaV0NCiAgICAgICAgfSkNCg0KICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycikgew0KICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7DQogICAgICAgIH0pOw0KICAgIH0sDQogIH0sDQogIC8vIGNyZWF0ZWQoKSB7DQogIC8vICAgdGhpcy5mbGFnID0gdGhpcy4kcm91dGUucXVlcnkuaWQ7DQogIC8vICAgY29uc29sZS5sb2codGhpcy5mbGFnKTsNCiAgLy8gICB2YXIgdGhhdCA9IHRoaXM7DQogIC8vICAgdGhpcy4kYXhpb3Moew0KICAvLyAgICAgbWV0aG9kOiAiIiwNCiAgLy8gICAgIHVybDogImh0dHA6Ly8xMjcuMC4wLjE6NTAwMC9zZWFyY2giLA0KICAvLyAgICAgZGF0YToge30sDQogIC8vICAgfSkNCiAgLy8gICAgIC50aGVuKChyZXMpID0+IHsNCiAgLy8gICAgICAgLy8gdGhhdC5hbGxfbWVzc2FnZXMgPSByZXMuZGF0YTsNCiAgLy8gICAgICAgY29uc29sZS5sb2cocmVzLmRhdGFbMF0pOw0KICAvLyAgICAgICAvLyBmb3IodmFyIGkgaW4gcmVzLmRhdGEpew0KICAvLyAgICAgICAvLyAgIHRoYXQuYWxsX21lc3NhZ2VzW2ldPXJlcy5kYXRhW2ldDQogIC8vICAgICAgIC8vIH0NCiAgLy8gICAgICAgLy8gSlNPTi5wYXJzZSh0aGF0LmFsbF9tZXNzYWdlcykNCiAgLy8gICAgICAgdGhpcy5pZCA9IHJlcy5kYXRhDQogIC8vICAgICAgIGlmICh0aGlzLmlkID09ICJpbnZhbGlkIikgew0KICAvLyAgICAgICAgIGFsZXJ0KCLor7fovpPlhaXmkJzntKLlhoXlrrkiKTsNCiAgLy8gICAgICAgfQ0KICAvLyAgICAgICBpZiAocmVzLmRhdGEgIT0gImludmFsaWQiKSB7DQogIC8vICAgICAgICAgZm9yICh2YXIgaSBpbiByZXMuZGF0YSkgew0KICAvLyAgICAgICAgICAgdGhhdC5hbGxfbWVzc2FnZXNbaV0gPSByZXMuZGF0YVtpXTsNCiAgLy8gICAgICAgICB9DQogIC8vICAgICAgICAgdGhhdC50b3RhbCA9IHRoYXQuYWxsX21lc3NhZ2VzLmxlbmd0aDsNCiAgLy8gICAgICAgICB0aGF0LmN1cnJlbnRfbWVzc2FnZXMgPSB0aGF0LmFsbF9tZXNzYWdlcy5zbGljZSgwLCAzKTsNCiAgLy8gICAgICAgICBjb25zb2xlLmxvZyh0aGF0LmFsbF9tZXNzYWdlcyk7DQoNCiAgLy8gICAgICAgICBjb25zb2xlLmxvZygpOw0KDQogIC8vICAgICAgICAgY29uc29sZS5sb2codGhpcy51cmwpOw0KICAvLyAgICAgICB9DQogIC8vICAgICB9KQ0KDQogIC8vICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycikgew0KICAvLyAgICAgICBjb25zb2xlLmxvZyhlcnIpOw0KICAvLyAgICAgfSk7DQogIC8vIH0sDQp9Ow0K"},{"version":3,"sources":["search.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"search.vue","sourceRoot":"src/views","sourcesContent":["\r\n<template>\r\n  <div style=\"margin-top: 15px\" class=\"moban\">\r\n    <el-input\r\n      placeholder=\"请输入内容\"\r\n      v-model=\"input\"\r\n      class=\"input-with-select\"\r\n    >\r\n      <el-select v-model=\"select\" slot=\"prepend\" placeholder=\"请选择\">\r\n        <el-option label=\"留言\" value=\"1\"></el-option>\r\n        <el-option label=\"用户\" value=\"2\"></el-option>\r\n      </el-select>\r\n      <el-button\r\n        slot=\"append\"\r\n        icon=\"el-icon-search\"\r\n        @click=\"searchData\"\r\n      ></el-button>\r\n    </el-input>\r\n    <div class=\"search-message\">\r\n      <div\r\n        class=\"departmentContent\"\r\n        v-for=\"(item, index) in current_messages\"\r\n        :key=\"index\"\r\n      >\r\n        <img class=\"rounded-circle avatar\" :src=\"img(item[6])\" alt=\"\" />\r\n        <div class=\"departmentInfo\">\r\n          <div class=\"departmentNamesty\" @click=\"jump(item['0'])\">\r\n            {{ item[1] }}\r\n          </div>\r\n\r\n          <div class=\"info\">\r\n            作者: {{ item[7] }}&nbsp;&nbsp;&nbsp; 日期:\r\n            {{ item[2] }}\r\n            &nbsp;&nbsp;&nbsp; 阅读数: {{ item[3] }}&nbsp;&nbsp;&nbsp; 回复数:\r\n            {{ item[4] }}\r\n          </div>\r\n\r\n          <div class=\"message-detail\" v-html=\"item[5]\"></div>\r\n        </div>\r\n      </div>\r\n      \r\n    </div>\r\n    <el-pagination\r\n      background\r\n      layout=\"prev, pager, next\"\r\n      :total=\"total\"\r\n      @size-change=\"handleSizeChange\"\r\n      @current-change=\"handleCurrentChange\"\r\n      :current-page=\"queryInfo.pagenum\"\r\n      :page-size=\"3\"\r\n    >\r\n    </el-pagination>\r\n    <el-footer height=\"100px\">\r\n      <div class=\"mod_copyright\">\r\n        <div class=\"copyright\">\r\n          地址：北京市昌平区华北电力大学 &nbsp;&nbsp; 电话：400-618-4000\r\n          &nbsp;&nbsp;邮箱: xxxxxxxxx.cn <br />\r\n          Github地址：xxxxxxxxx\r\n        </div>\r\n      </div>\r\n    </el-footer>\r\n  </div>\r\n  \r\n</template>\r\n\r\n<style>\r\n.el-select .el-input {\r\n  width: 130px;\r\n}\r\n.input-with-select .el-input-group__prepend {\r\n  background-color: #fff;\r\n}\r\n</style>\r\n<style scoped>\r\n.moban {\r\n  width: 1100px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.search-message {\r\n  box-shadow: 0 0 28px #dee9fe, 0 0 15px rgba(0, 0, 0, 0.04);\r\n  margin-top: 10px;\r\n}\r\n.rounded-circle {\r\n  border-radius: 50% !important;\r\n}\r\n.avatar {\r\n  margin: 15px 0;\r\n  width: 64px;\r\n  height: 64px;\r\n}\r\n.col-left {\r\n  display: inline;\r\n}\r\n.departmentContent {\r\n  padding: 10rpx 0 10rpx 0;\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 80px;\r\n  margin-top: 10px;\r\n}\r\n.departmentContent .departmentInfo {\r\n  padding-left: 20px;\r\n}\r\n.departmentInfo .departmentNamesty {\r\n  font-weight: bold;\r\n  font-size: 18px;\r\n  padding-bottom: 5rpx;\r\n}\r\n.departmentContent .departmentInfo .departmentNamesty {\r\n  text-align: left;\r\n  margin-bottom: 16px;\r\n}\r\n.info {\r\n  font-family: inherit;\r\n  font-size: 14px;\r\n  text-align: left;\r\n}\r\n.departmentInfo .message-detail {\r\n  margin-top: 20px;\r\n  font-size: 16px;\r\n  line-height: 25px;\r\n  text-align: left;\r\n}\r\n</style>\r\n<script>\r\nimport {request} from '../network/request'\r\nexport default {\r\n  data() {\r\n    return {\r\n      input: \"\",\r\n      select: \"\",\r\n      queryInfo: {\r\n        query: \"\",\r\n        pagenum: 1,\r\n      },\r\n      id: \"\",\r\n\r\n      current_messages: [],\r\n      all_messages: [],\r\n      total: 0,\r\n    };\r\n  },\r\n  computed: {\r\n    img: function () {\r\n      return function (url) {\r\n        return require(\"../assets/\" + url);\r\n      };\r\n    },\r\n  },\r\n  methods: {\r\n    handleSizeChange(val) {\r\n      console.log(`每页 ${val} 条`);\r\n    },\r\n    handleCurrentChange(newPage) {\r\n      this.queryInfo.pagenum = newPage;\r\n      // console.log(`当前页: ${this.queryInfo.pagenum}`);\r\n      var a = this.queryInfo.pagenum;\r\n      // console.log(a);\r\n      this.current_messages = this.all_messages.slice(3 * a - 3, 3 * a);\r\n      // console.log(`当前curret_messages长度: ${this.current_messages}`);\r\n    },\r\n    jump(messageId, type) {\r\n      localStorage.messageId = messageId;\r\n      localStorage.type = type;\r\n      this.$router.push({\r\n        path: \"messageDetail\",\r\n      });\r\n    },\r\n\r\n    searchData() {\r\n      console.log(this.input);\r\n      console.log(this.select);\r\n\r\n      request({\r\n        method: \"POST\",\r\n        url: \"http://127.0.0.1:5000/search\",\r\n        data: {\r\n          select: this.select,\r\n          input: this.input,\r\n        },\r\n      })\r\n        .then((res) => {\r\n          console.log(res.data);\r\n          if(this.select==\"\"){\r\n            alert(\"请选择搜索分类\");\r\n            return\r\n          }\r\n          if(res.data==\"invalid\"){\r\n            alert(\"请输入搜索内容\")\r\n            return\r\n          }\r\n          if(res.data!=\"invalid\"){\r\n          for (var i in res.data) {\r\n            this.all_messages[i] = res.data[i];\r\n          }\r\n          this.total = this.all_messages.length;\r\n          this.current_messages = this.all_messages.slice(0, 3);}\r\n          // console.log(res.data)\r\n          // for(var i in res.data){\r\n          //   that.all_messages[i]=res.data[i]\r\n        })\r\n\r\n        .catch(function (err) {\r\n          console.log(err);\r\n        });\r\n    },\r\n  },\r\n  // created() {\r\n  //   this.flag = this.$route.query.id;\r\n  //   console.log(this.flag);\r\n  //   var that = this;\r\n  //   this.$axios({\r\n  //     method: \"\",\r\n  //     url: \"http://127.0.0.1:5000/search\",\r\n  //     data: {},\r\n  //   })\r\n  //     .then((res) => {\r\n  //       // that.all_messages = res.data;\r\n  //       console.log(res.data[0]);\r\n  //       // for(var i in res.data){\r\n  //       //   that.all_messages[i]=res.data[i]\r\n  //       // }\r\n  //       // JSON.parse(that.all_messages)\r\n  //       this.id = res.data\r\n  //       if (this.id == \"invalid\") {\r\n  //         alert(\"请输入搜索内容\");\r\n  //       }\r\n  //       if (res.data != \"invalid\") {\r\n  //         for (var i in res.data) {\r\n  //           that.all_messages[i] = res.data[i];\r\n  //         }\r\n  //         that.total = that.all_messages.length;\r\n  //         that.current_messages = that.all_messages.slice(0, 3);\r\n  //         console.log(that.all_messages);\r\n\r\n  //         console.log();\r\n\r\n  //         console.log(this.url);\r\n  //       }\r\n  //     })\r\n\r\n  //     .catch(function (err) {\r\n  //       console.log(err);\r\n  //     });\r\n  // },\r\n};\r\n</script>"]}]}