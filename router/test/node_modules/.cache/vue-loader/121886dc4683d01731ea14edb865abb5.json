{"remainingRequest":"/Users/zhaojiaming/Downloads/bbs_rectify/router/test/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhaojiaming/Downloads/bbs_rectify/router/test/src/views/search.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/Users/zhaojiaming/Downloads/bbs_rectify/router/test/src/views/search.vue","mtime":1625730158000},{"path":"/Users/zhaojiaming/Downloads/bbs_rectify/router/test/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhaojiaming/Downloads/bbs_rectify/router/test/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/zhaojiaming/Downloads/bbs_rectify/router/test/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/zhaojiaming/Downloads/bbs_rectify/router/test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhaojiaming/Downloads/bbs_rectify/router/test/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5lbC1zZWxlY3QgLmVsLWlucHV0IHsNCiAgd2lkdGg6IDEzMHB4Ow0KfQ0KLmlucHV0LXdpdGgtc2VsZWN0IC5lbC1pbnB1dC1ncm91cF9fcHJlcGVuZCB7DQogIGJhY2tncm91bmQtY29sb3I6ICNmZmY7DQp9DQo="},{"version":3,"sources":["search.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkEA;AACA;AACA;AACA;AACA;AACA","file":"search.vue","sourceRoot":"src/views","sourcesContent":["\r\n<template>\r\n  <div style=\"margin-top: 15px\" class=\"moban\">\r\n    <el-input\r\n      placeholder=\"请输入内容\"\r\n      v-model=\"input\"\r\n      class=\"input-with-select\"\r\n    >\r\n      <el-select v-model=\"select\" slot=\"prepend\" placeholder=\"请选择\">\r\n        <el-option label=\"留言\" value=\"1\"></el-option>\r\n        <el-option label=\"用户\" value=\"2\"></el-option>\r\n      </el-select>\r\n      <el-button\r\n        slot=\"append\"\r\n        icon=\"el-icon-search\"\r\n        @click=\"searchData\"\r\n      ></el-button>\r\n    </el-input>\r\n    <div class=\"search-message\">\r\n      <div\r\n        class=\"departmentContent\"\r\n        v-for=\"(item, index) in current_messages\"\r\n        :key=\"index\"\r\n      >\r\n        <img class=\"rounded-circle avatar\" :src=\"img(item[6])\" alt=\"\" />\r\n        <div class=\"departmentInfo\">\r\n          <div class=\"departmentNamesty\" @click=\"jump(item['0'])\">\r\n            {{ item[1] }}\r\n          </div>\r\n\r\n          <div class=\"info\">\r\n            作者: {{ item[7] }}&nbsp;&nbsp;&nbsp; 日期:\r\n            {{ item[2] }}\r\n            &nbsp;&nbsp;&nbsp; 阅读数: {{ item[3] }}&nbsp;&nbsp;&nbsp; 回复数:\r\n            {{ item[4] }}\r\n          </div>\r\n\r\n          <div class=\"message-detail\" v-html=\"item[5]\"></div>\r\n        </div>\r\n      </div>\r\n      \r\n    </div>\r\n    <el-pagination\r\n      background\r\n      layout=\"prev, pager, next\"\r\n      :total=\"total\"\r\n      @size-change=\"handleSizeChange\"\r\n      @current-change=\"handleCurrentChange\"\r\n      :current-page=\"queryInfo.pagenum\"\r\n      :page-size=\"3\"\r\n    >\r\n    </el-pagination>\r\n    <el-footer height=\"100px\">\r\n      <div class=\"mod_copyright\">\r\n        <div class=\"copyright\">\r\n          地址：北京市昌平区华北电力大学 &nbsp;&nbsp; 电话：400-618-4000\r\n          &nbsp;&nbsp;邮箱: xxxxxxxxx.cn <br />\r\n          Github地址：xxxxxxxxx\r\n        </div>\r\n      </div>\r\n    </el-footer>\r\n  </div>\r\n  \r\n</template>\r\n\r\n<style>\r\n.el-select .el-input {\r\n  width: 130px;\r\n}\r\n.input-with-select .el-input-group__prepend {\r\n  background-color: #fff;\r\n}\r\n</style>\r\n<style scoped>\r\n.moban {\r\n  width: 1100px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.search-message {\r\n  box-shadow: 0 0 28px #dee9fe, 0 0 15px rgba(0, 0, 0, 0.04);\r\n  margin-top: 10px;\r\n}\r\n.rounded-circle {\r\n  border-radius: 50% !important;\r\n}\r\n.avatar {\r\n  margin: 15px 0;\r\n  width: 64px;\r\n  height: 64px;\r\n}\r\n.col-left {\r\n  display: inline;\r\n}\r\n.departmentContent {\r\n  padding: 10rpx 0 10rpx 0;\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 80px;\r\n  margin-top: 10px;\r\n}\r\n.departmentContent .departmentInfo {\r\n  padding-left: 20px;\r\n}\r\n.departmentInfo .departmentNamesty {\r\n  font-weight: bold;\r\n  font-size: 18px;\r\n  padding-bottom: 5rpx;\r\n}\r\n.departmentContent .departmentInfo .departmentNamesty {\r\n  text-align: left;\r\n  margin-bottom: 16px;\r\n}\r\n.info {\r\n  font-family: inherit;\r\n  font-size: 14px;\r\n  text-align: left;\r\n}\r\n.departmentInfo .message-detail {\r\n  margin-top: 20px;\r\n  font-size: 16px;\r\n  line-height: 25px;\r\n  text-align: left;\r\n}\r\n</style>\r\n<script>\r\nimport {request} from '../network/request'\r\nexport default {\r\n  data() {\r\n    return {\r\n      input: \"\",\r\n      select: \"\",\r\n      queryInfo: {\r\n        query: \"\",\r\n        pagenum: 1,\r\n      },\r\n      id: \"\",\r\n\r\n      current_messages: [],\r\n      all_messages: [],\r\n      total: 0,\r\n    };\r\n  },\r\n  computed: {\r\n    img: function () {\r\n      return function (url) {\r\n        return require(\"../assets/\" + url);\r\n      };\r\n    },\r\n  },\r\n  methods: {\r\n    handleSizeChange(val) {\r\n      console.log(`每页 ${val} 条`);\r\n    },\r\n    handleCurrentChange(newPage) {\r\n      this.queryInfo.pagenum = newPage;\r\n      // console.log(`当前页: ${this.queryInfo.pagenum}`);\r\n      var a = this.queryInfo.pagenum;\r\n      // console.log(a);\r\n      this.current_messages = this.all_messages.slice(3 * a - 3, 3 * a);\r\n      // console.log(`当前curret_messages长度: ${this.current_messages}`);\r\n    },\r\n    jump(messageId, type) {\r\n      localStorage.messageId = messageId;\r\n      localStorage.type = type;\r\n      this.$router.push({\r\n        path: \"messageDetail\",\r\n      });\r\n    },\r\n\r\n    searchData() {\r\n      console.log(this.input);\r\n      console.log(this.select);\r\n\r\n      request({\r\n        method: \"POST\",\r\n        url: \"http://127.0.0.1:5000/search\",\r\n        data: {\r\n          select: this.select,\r\n          input: this.input,\r\n        },\r\n      })\r\n        .then((res) => {\r\n          console.log(res.data);\r\n          if(this.select==\"\"){\r\n            alert(\"请选择搜索分类\");\r\n            return\r\n          }\r\n          if(res.data==\"invalid\"){\r\n            alert(\"请输入搜索内容\")\r\n            return\r\n          }\r\n          if(res.data!=\"invalid\"){\r\n          for (var i in res.data) {\r\n            this.all_messages[i] = res.data[i];\r\n          }\r\n          this.total = this.all_messages.length;\r\n          this.current_messages = this.all_messages.slice(0, 3);}\r\n          // console.log(res.data)\r\n          // for(var i in res.data){\r\n          //   that.all_messages[i]=res.data[i]\r\n        })\r\n\r\n        .catch(function (err) {\r\n          console.log(err);\r\n        });\r\n    },\r\n  },\r\n  // created() {\r\n  //   this.flag = this.$route.query.id;\r\n  //   console.log(this.flag);\r\n  //   var that = this;\r\n  //   this.$axios({\r\n  //     method: \"\",\r\n  //     url: \"http://127.0.0.1:5000/search\",\r\n  //     data: {},\r\n  //   })\r\n  //     .then((res) => {\r\n  //       // that.all_messages = res.data;\r\n  //       console.log(res.data[0]);\r\n  //       // for(var i in res.data){\r\n  //       //   that.all_messages[i]=res.data[i]\r\n  //       // }\r\n  //       // JSON.parse(that.all_messages)\r\n  //       this.id = res.data\r\n  //       if (this.id == \"invalid\") {\r\n  //         alert(\"请输入搜索内容\");\r\n  //       }\r\n  //       if (res.data != \"invalid\") {\r\n  //         for (var i in res.data) {\r\n  //           that.all_messages[i] = res.data[i];\r\n  //         }\r\n  //         that.total = that.all_messages.length;\r\n  //         that.current_messages = that.all_messages.slice(0, 3);\r\n  //         console.log(that.all_messages);\r\n\r\n  //         console.log();\r\n\r\n  //         console.log(this.url);\r\n  //       }\r\n  //     })\r\n\r\n  //     .catch(function (err) {\r\n  //       console.log(err);\r\n  //     });\r\n  // },\r\n};\r\n</script>"]}]}