{"remainingRequest":"/Users/zhaojiaming/Downloads/bbs_rectify/router/test/node_modules/babel-loader/lib/index.js!/Users/zhaojiaming/Downloads/bbs_rectify/router/test/node_modules/eslint-loader/index.js??ref--13-0!/Users/zhaojiaming/Downloads/bbs_rectify/router/test/src/network/request.js","dependencies":[{"path":"/Users/zhaojiaming/Downloads/bbs_rectify/router/test/src/network/request.js","mtime":1625713928000},{"path":"/Users/zhaojiaming/Downloads/bbs_rectify/router/test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhaojiaming/Downloads/bbs_rectify/router/test/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/zhaojiaming/Downloads/bbs_rectify/router/test/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwpleHBvcnQgZnVuY3Rpb24gcmVxdWVzdChjb25maWcpIHsKICB2YXIgX3RoaXMgPSB0aGlzOwoKICB2YXIgaW5zdGFuY2UgPSBheGlvcy5jcmVhdGUoewogICAgYmFzZVVSTDogImh0dHA6Ly8xMjcuMC4wLjE6NTAwMCIsCiAgICB0aW1lb3V0OiA1MDAwCiAgfSk7IC8vIGh0dHAgcmVxdWVzdCDmi6bmiKrlmagKCiAgaW5zdGFuY2UuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICAgIGlmIChzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJhY2Nlc3NUb2tlbiIpKSB7CiAgICAgIGNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJhY2Nlc3NUb2tlbiIpOwogICAgfQoKICAgIHJldHVybiBjb25maWc7CiAgfSwgZnVuY3Rpb24gKGVycikgewogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7CiAgfSk7IC8vIGh0dHAgcmVzcG9uc2Ug5oum5oiq5ZmoCgogIGluc3RhbmNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICByZXR1cm4gcmVzcG9uc2U7CiAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgICBpZiAoZXJyb3IucmVzcG9uc2UpIHsKICAgICAgY29uc29sZS5sb2coJ2F4aW9zOicgKyBlcnJvci5yZXNwb25zZS5zdGF0dXMpOwoKICAgICAgc3dpdGNoIChlcnJvci5yZXNwb25zZS5zdGF0dXMpIHsKICAgICAgICBjYXNlIDQwMzoKICAgICAgICAgIC8vIOi/lOWbnjQwMyDmuIXpmaR0b2tlbuS/oeaBr+W5tui3s+i9rOWIsOeZu+W9lemhtemdogogICAgICAgICAgc2Vzc2lvblN0b3JhZ2UuY2xlYXIoKTsKCiAgICAgICAgICBfdGhpcy4kcm91dGVyLnJlcGxhY2UoewogICAgICAgICAgICBwYXRoOiAnL2xvZ2luJwogICAgICAgICAgfSk7CgogICAgICAgICAgX3RoaXMuJE1lc3NhZ2UoewogICAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfmnKrnmbvlvZXvvIzov5Tlm57nmbvpmYbnlYzpnaInLAogICAgICAgICAgICB0eXBlOiAnZXJyb3InLAogICAgICAgICAgICBkdXJhdGlvbjogMzAwMAogICAgICAgICAgfSk7CgogICAgICB9CiAgICB9CgogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsgLy8g6L+U5Zue5o6l5Y+j55qE6ZSZ6K+v5L+h5oGvCiAgfSk7CiAgcmV0dXJuIGluc3RhbmNlKGNvbmZpZyk7Cn0="},{"version":3,"sources":["/Users/zhaojiaming/Downloads/bbs_rectify/router/test/src/network/request.js"],"names":["axios","request","config","instance","create","baseURL","timeout","interceptors","use","sessionStorage","getItem","headers","Authorization","err","Promise","reject","response","error","console","log","status","clear","$router","replace","path","$Message","showClose","message","type","duration"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,OAAO,SAASC,OAAT,CAAiBC,MAAjB,EAAyB;AAAA;;AAC5B,MAAMC,QAAQ,GAAGH,KAAK,CAACI,MAAN,CAAa;AAC1BC,IAAAA,OAAO,EAAE,uBADiB;AAE1BC,IAAAA,OAAO,EAAE;AAFiB,GAAb,CAAjB,CAD4B,CAK5B;;AACAH,EAAAA,QAAQ,CAACI,YAAT,CAAsBN,OAAtB,CAA8BO,GAA9B,CACI,UAAAN,MAAM,EAAI;AACN,QAAIO,cAAc,CAACC,OAAf,CAAuB,aAAvB,CAAJ,EAA2C;AACvCR,MAAAA,MAAM,CAACS,OAAP,CAAeC,aAAf,GAA+BH,cAAc,CAACC,OAAf,CAAuB,aAAvB,CAA/B;AACH;;AACD,WAAOR,MAAP;AACH,GANL,EAOI,UAAAW,GAAG,EAAI;AACH,WAAOC,OAAO,CAACC,MAAR,CAAeF,GAAf,CAAP;AACH,GATL,EAN4B,CAiB5B;;AACAV,EAAAA,QAAQ,CAACI,YAAT,CAAsBS,QAAtB,CAA+BR,GAA/B,CACI,UAAAQ,QAAQ,EAAI;AACR,WAAOA,QAAP;AACH,GAHL,EAII,UAAAC,KAAK,EAAI;AACL,QAAIA,KAAK,CAACD,QAAV,EAAoB;AAChBE,MAAAA,OAAO,CAACC,GAAR,CAAY,WAAWF,KAAK,CAACD,QAAN,CAAeI,MAAtC;;AACA,cAAQH,KAAK,CAACD,QAAN,CAAeI,MAAvB;AACI,aAAK,GAAL;AACI;AACAX,UAAAA,cAAc,CAACY,KAAf;;AACA,UAAA,KAAI,CAACC,OAAL,CAAaC,OAAb,CAAqB;AACjBC,YAAAA,IAAI,EAAE;AADW,WAArB;;AAGA,UAAA,KAAI,CAACC,QAAL,CAAc;AAAEC,YAAAA,SAAS,EAAE,IAAb;AAAmBC,YAAAA,OAAO,EAAE,YAA5B;AAA0CC,YAAAA,IAAI,EAAE,OAAhD;AAAyDC,YAAAA,QAAQ,EAAE;AAAnE,WAAd;;AAPR;AAUH;;AACD,WAAOf,OAAO,CAACC,MAAR,CAAeE,KAAf,CAAP,CAdK,CAc2B;AACnC,GAnBL;AAqBA,SAAOd,QAAQ,CAACD,MAAD,CAAf;AACH","sourcesContent":["import axios from \"axios\"\r\n\r\nexport function request(config) {\r\n    const instance = axios.create({\r\n        baseURL: \"http://127.0.0.1:5000\",\r\n        timeout: 5000\r\n    })\r\n    // http request 拦截器\r\n    instance.interceptors.request.use(\r\n        config => {\r\n            if (sessionStorage.getItem(\"accessToken\")) {\r\n                config.headers.Authorization = sessionStorage.getItem(\"accessToken\")\r\n            }\r\n            return config;\r\n        },\r\n        err => {\r\n            return Promise.reject(err);\r\n        }\r\n    )\r\n    // http response 拦截器\r\n    instance.interceptors.response.use(\r\n        response => {\r\n            return response;\r\n        },\r\n        error => {\r\n            if (error.response) {\r\n                console.log('axios:' + error.response.status);\r\n                switch (error.response.status) {\r\n                    case 403:\r\n                        // 返回403 清除token信息并跳转到登录页面\r\n                        sessionStorage.clear()\r\n                        this.$router.replace({\r\n                            path: '/login'\r\n                        })\r\n                        this.$Message({ showClose: true, message: '未登录，返回登陆界面', type: 'error', duration: 3000 })\r\n\r\n                }\r\n            }\r\n            return Promise.reject(error);   // 返回接口的错误信息\r\n        }\r\n    )\r\n    return instance(config)\r\n}\r\n\r\n\r\n"]}]}